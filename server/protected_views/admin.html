<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard | THE RAS</title>

    <!-- css stylesheets -->
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/modal.css">
    <link rel="stylesheet" href="/css/project.css">
    <link rel="stylesheet" href="/css/admin.css">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Montserrat:wght@500;600;700;800&display=swap" rel="stylesheet">
    <!-- SimpleMDE CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">
</head>
<body>
    <nav class="navbar glass">
        <div class="container nav-container">
            <a href="/" class="logo">THE RAS<span class="dot">.</span></a>
            <div class="flex-center gap-4">
                <span class="badge">Admin Mode</span>
                <button id="logout-btn" class="btn btn-sm btn-danger"><i data-lucide="log-out"></i> Logout</button>
            </div>
        </div>
    </nav>

    <main class="pt-32 pb-20">
        <div class="container">
            <div class="dashboard-header mb-8">
                <h1>Dashboard</h1>
            </div>

            <div class="tabs">
                <button class="tab-btn active" data-tab="projects"><i data-lucide="layout"></i> Projects</button>
                <button class="tab-btn" data-tab="messages"><i data-lucide="mail"></i> Messages</button>
            </div>

            <div id="projects-tab" class="tab-content active">
                <div class="flex-between mb-6">
                    <h3>Manage Projects</h3>
                    <button id="add-project-btn" class="btn btn-primary btn-sm"><i data-lucide="plus"></i> Add Project</button>
                </div>
                <div class="admin-projects-list" id="admin-projects">
                    <!-- Loaded via JS -->
                </div>
            </div>

            <div id="messages-tab" class="tab-content">
                <div class="flex-between mb-6" id="inbox-text">
                    <h3>Inbox <span id="message-count" class="badge-count"></span></h3>
                
                    <div style="display:flex; gap:10px;">
                        <input type="text" id="searchMessages" placeholder="Search..." 
                            style="padding:8px 14px;border-radius:8px;border:1px solid var(--glass-border);background:var(--glass-bg);color:white;">
                        
                        <select id="sortMessages" 
                            style="padding:8px 14px;border-radius:8px;border:1px solid var(--glass-border);background:var(--glass-bg);color:white;">
                            <option value="latest">Latest</option>
                            <option value="oldest">Oldest</option>
                        </select>
                    </div>
                </div>

            
                <div class="inbox-wrapper">
                 
                 <!-- Left Inbox List -->
                 <div class="messages-list" id="admin-messages">
                     <!-- Loaded via JS -->
                 </div>
            
                 <!-- Right Message Preview -->
                 <div id="message-preview" class="message-preview empty">
                     <p>Select a message to read.</p>
                 </div>
            
                </div>
            </div>

        </div>
    </main>

    <!-- Project Modal -->
    <div class="modal-overlay" id="project-modal">
        <div class="modal-content glass-card">
            <div class="modal-header">
                <h3 id="modal-title">Add Project</h3>
                <button class="close-modal" id="close-modal">&times;</button>
            </div>
            <form id="project-form">
            
               <input type="hidden" id="project-id">
            
               <!-- Title -->
               <div class="form-group">
                   <label for="p-title">Project Title</label>
                   <input type="text" id="p-title" required placeholder="Project Name">
               </div>
            
               <!-- Short Description -->
               <div class="form-group">
                   <label for="p-desc">Short Description</label>
                   <textarea id="p-desc" required placeholder="Brief project summary..." style="min-height: 80px;"></textarea>
               </div>
            
               <!-- Markdown Editor -->
               <div class="markdown-container">
                   <h3 class="markdown-header">
                       <i data-lucide="edit"></i> Detailed Description (Markdown)
                   </h3>
                   
                   <textarea id="editor"></textarea>
            
                   <!-- Live Preview -->
                   <h3 class="markdown-header" style="margin-top:20px;">
                       <i data-lucide="eye"></i> Live Preview
                   </h3>
                   <div id="preview" class="markdown-preview">Start typing to see preview...</div>
               </div>
            
               <!-- Tech Stack -->
               <div class="form-group">
                   <label for="p-tech">Tech Stack (comma separated)</label>
                   <input type="text" id="p-tech" placeholder="React, Node.js, MongoDB">
               </div>
            
               <!-- Image URL -->
               <div class="form-group">
                   <label for="p-image">Image URL</label>
                   <input type="url" id="p-image" placeholder="https://example.com/image.jpg">
               </div>
               <div class="form-group">
                   <label for="p-githublink">GitHub Repo URL</label>
                   <input type="url" id="p-githublink" placeholder="git@github.com:username/repositoryname.git">
               </div>
            
               <!-- Submit -->
               <button type="submit" class="btn btn-primary w-full">Save Project</button>
            </form>
            
        </div>
    </div>
    <!-- SimpleMDE JavaScript -->
    <script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>
    
    <!-- Marked.js for Markdown Preview -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <script>
        lucide.createIcons();
    </script>
    <script src="/js/admin.js"></script>
</body>
</html>